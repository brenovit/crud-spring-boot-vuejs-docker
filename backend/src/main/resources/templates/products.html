<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="">
<meta name="author" content="">
<title>Store</title>
<link href="https://unpkg.com/bootstrap@4.3.1/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="icon" type="image/x-icon" href="icon.ico">
</head>
<body>
	<div class="container">
		<h1>Store - <a href="">Home</a></h1>
		<main id="app"> <router-view></router-view> </main>
	</div>

	<template id="product">
	<div>
		<h2>View product</h2>	
		<div class="form-group">
			<label for="name">Name</label>
			<input type="text" class="form-control" id="name" v-model="product.name" readonly>
		</div>
		<div class="form-group">
			<label for="description">Description</label>
			<textarea type="text-area" class="form-control" id="description" v-model="product.description" rows="5" readonly></textarea>
		</div>
		<div class="form-group">
			<label for="price">Price <span class="glyphicon glyphicon-euro"></span></label>
			<input type="text" class="form-control" id="price" v-model="product.price" readonly>
		</div>
		<router-link :to="{name: 'product-edit', params: {product_id: product.id}}" class="btn btn-warning btn-xs">Edit</router-link>	
		<router-link to="/" class="btn btn-secondary">Back</router-link>
	</div>
	</template>

	<template id="product-list">
	<div>
		<div class="row mb-2">
			<router-link :to="{name: 'product-add'}" class="btn btn-success col-sm-2">				
				Add product
			</router-link>			
		</div>
		<div class="row mb-2">
			<input placeholder="Search" v-model="searchKey" class="form-control col-sm-12" id="search-element" required/>			
		</div>
		<div class="row">
			<table class="table table-sm table-hover">
				<thead class="thead-light">
					<tr>
						<th scope="col">#</th>
						<th scope="col">Name</th>
						<th scope="col">Description</th>
						<th scope="col">Price</th>
						<th scope="col">Actions</th>
			        </tr>
			    </thead>
			    <tbody>
			       	<tr v-for="(product,index) in filteredProducts">
			       		<th scope="row">{{index+1}}</th>			       	
			        	<td><router-link :to="{name: 'product', params: {product_id: product.id}}">{{ product.name }}</router-link></td>
			         	<td>{{ product.description }}</td>
			         	<td>{{ product.price }}</td>
			         	<td>
			         		<router-link :to="{name: 'product-edit', params: {product_id: product.id}}" class="btn btn-warning btn-sm">Edit</router-link>
			          		<router-link :to="{name: 'product-delete', params: {product_id: product.id}}" class="btn btn-danger btn-sm">Delete</router-link>
			        	</td>			         	
			       	</tr>
				</tbody>
			</table>
		</div>
	</div>	
	</template>
	
	<template id="add-product">
		<div>
			<h2>Add new product</h2>
			<div>
				<div class="form-group">
					<label for="add-name">Name</label>
					<input class="form-control" id="add-name" v-model="product.name" required/>
				</div>
				<div class="form-group">
					<label for="add-description">Description</label>
					<textarea class="form-control" id="add-description" rows="5" v-model="product.description"></textarea>
				</div>
				<div class="form-group">
					<label for="add-price">Price <span class="glyphicon glyphicon-euro"></span></label>
					<input type="number" step="0.01" pattern="^\d+(?:\.\d{1,2})?$" class="form-control" id="add-price" v-model="product.price"/>
				</div>
				<button class="btn btn-primary" @click="createProduct">Create</button>
				<router-link to="/" class="btn btn-secondary">Cancel</router-link>
			</div>
		</div>
	</template>
	
	<template id="edit-product">
		<div>
			<h2>Edit product</h2>
			<div>
				<div class="form-group">
					<label for="edit-name">Name</label>
					<input class="form-control" id="edit-name" v-model="product.name" required/>
				</div>
				<div class="form-group">
					<label for="edit-description">Description</label>
					<textarea class="form-control" id="edit-description" rows="5" v-model="product.description"></textarea>
				</div>
				<div class="form-group">
					<label for="edit-price">Price, <span class="glyphicon glyphicon-euro"></span></label>
					<input type="number" id="edit-price" step="0.01" pattern="^\d+(?:\.\d{1,2})?$" class="form-control" id="add-price" v-model="product.price"/>
				</div>
				<button class="btn btn-primary" @click="updateProduct">Save</button>
				<router-link to="/" class="btn btn-secondary">Cancel</router-link>
			</div>
		</div>
	</template>
	
	<template id="delete-product">
		<div>
		  <h2>Delete product {{ product.name }}</h2>
		  <div>
		  	<p>The action cannot be undone.</p>
		   	<button class="btn btn-danger" @click="deleteProduct">Delete</button>
			<router-link to="/" class="btn btn-secondary">Cancel</router-link>
		  </div>
		</div>
	</template>
	
	<script	src="https://unpkg.com/jquery@3.3.1/dist/jquery.slim.min.js"></script>
	<script	src="https://unpkg.com/bootstrap@4.3.1/dist/js/bootstrap.min.js"></script>
	<script	src="https://unpkg.com/vue@2.6.10/dist/vue.min.js"></script>
	<script	src="https://unpkg.com/vue-router@3.1.3/dist/vue-router.min.js"></script>
	<script src="https://unpkg.com/axios@0.19.0/dist/axios.min.js"></script>
	<script src="js/products.js"></script>
</body>